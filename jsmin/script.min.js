var melibu_plugin_social={name:"MeliBu Plugin SSS",modal:document.querySelector(".melibu-social-modal"),dialog:document.querySelector(".melibu-social-modal > .melibu-social-modal__dialog"),init:function(){if(document.getElementsByClassName("melibu-share-button"))for(var a=document.getElementsByClassName("melibu-share-button"),b=0;b<a.length;b++)melibu_plugin_event.addEvent(a[b],"click",melibu_plugin_social.click),melibu_plugin_event.addEvent(a[b],"contextmenu",melibu_plugin_social.click);if(document.querySelectorAll(".melibu-share-button-link"))for(var c=document.querySelectorAll(".melibu-share-button-link"),d=0;d<c.length;d++)melibu_plugin_event.addEvent(c[d],"click",melibu_plugin_social.modalClick),melibu_plugin_event.addEvent(c[d],"contextmenu",melibu_plugin_social.modalClick);if(document.querySelectorAll(".melibu-social-modal .melibu-social-modal__footer__abort"))for(var e=document.querySelectorAll(".melibu-social-modal .melibu-social-modal__footer__abort"),f=0;f<e.length;f++)melibu_plugin_event.addEvent(e[f],"click",melibu_plugin_social.cancel)},click:function(a){a.preventDefault();var b={action:"melibu_sss_ajax",actiontype:"click",click:1};if(b.agent=encodeURIComponent(navigator.userAgent),a.target.href){b.type=a.target.getAttribute("data-mb-sss-click"),b.perma=encodeURI(a.target.getAttribute("data-mb-sss-perma")),b.link=decodeURI(a.target.href);var c=a.target.classList[1];b.social=c.substr(0,c.length-1)}else if(a.currentTarget.href){b.type=a.currentTarget.getAttribute("data-mb-sss-click"),b.perma=encodeURI(a.currentTarget.getAttribute("data-mb-sss-perma")),b.link=decodeURI(a.currentTarget.href);var c=a.currentTarget.classList[1];b.social=c.substr(0,c.length-1)}return melibu_plugin_ajax.addAjax({type:"POST",url:melibu_sss_obj.mb_ajax_url+"/wp-admin/admin-ajax.php",data:b,success:function(a){melibu_plugin_social.successAction(b,a)},error:function(a){console.log(a)}}),!1},successAction:function(a,b){var c,d,e="width="+parseInt(melibu_sss_obj.mb_pop_up_width)+",height="+parseInt(melibu_sss_obj.mb_pop_up_height)+",resizable="+melibu_sss_obj.mb_pop_up_resize,f=melibu_plugin_social.killZero(b);try{d=JSON.parse(f)}catch(a){d=""}d&&(melibu_plugin_social.setButtonCounts(a,d),melibu_plugin_social.setTotalCounts(a,d),a.link!==a.perma+"#"?"on"===melibu_sss_obj.mb_pop_up?(c=window.open(d.link,"MB Social",e),null!=c&&"undefined"!=typeof c||("on"===melibu_sss_obj.mb_pop_up_new_window?newtab=window.open(d.link,"_blank"):location.href=d.link)):"on"===melibu_sss_obj.mb_pop_up_new_window?newtab=window.open(d.link,"_blank"):location.href=d.link:window.print())},setButtonCounts:function(a,b){for(var c=document.querySelectorAll(".mb-sharing-social-safe ."+a.social+" .melibu-share-button__count"),d=b.shared+1,e=0;e<c.length;e++)c[e].innerHTML=d},setTotalCounts:function(a,b){var c,d=0;c="share"===a.type?document.querySelectorAll(".mb-plugin-sss-count-share"):document.querySelectorAll(".mb-plugin-sss-count-follow"),d=b.count+1;for(var e=0;e<c.length;e++)c[e].innerHTML=d},modalClick:function(a){return a.preventDefault(),melibu_plugin_social.dialog.style.top="10%",melibu_plugin_social.modal.style.visibility="visible",!1},cancel:function(){return melibu_plugin_social.dialog&&(melibu_plugin_social.dialog.style.top="-50%",melibu_plugin_social.modal.style.visibility="hidden"),!1},killZero:function(a){var b="";return b="0"===a.substr(a.length-1)?a.substring(0,a.length-1):a}},melibu_plugin_social_bar={name:"MeliBu Plugin SSS bar",bar:document.querySelector(".melibu-social--feedback"),barTop:document.querySelector(".melibu-social--feedback.mb-sf-top .mb-sharing-social-safe > div"),barTopToolTip:document.querySelector(".melibu-social--feedback.mb-sf-top .st-tooltip"),barButton:document.querySelectorAll(".melibu-social--feedback-button"),init:function(){if(melibu_plugin_social_bar.barButton)for(var a=melibu_plugin_social_bar.barButton,b=0;b<a.length;b++)melibu_plugin_event.addEvent(a[b],"click",melibu_plugin_social_bar.click),melibu_plugin_event.addEvent(a[b],"contextmenu",melibu_plugin_social_bar.click);if(melibu_plugin_social_bar.barTop){var c=melibu_plugin_social_bar.barTop,d=melibu_plugin_social_bar.barTopToolTip;c.parentNode.insertBefore(d,c),console.log("ok")}},click:function(a){a.preventDefault(),melibu_plugin_social_bar.bar.classList.contains("mb-sf-left")?"-50px"===melibu_plugin_social_bar.bar.style.left||""===melibu_plugin_social_bar.bar.style.left?(melibu_plugin_social_bar.bar.style.left="0",a.currentTarget.style.transform="rotate(0)"):(melibu_plugin_social_bar.bar.style.left="-50px",a.currentTarget.style.transform="rotate(180deg)"):melibu_plugin_social_bar.bar.classList.contains("mb-sf-top")?"-77px"===melibu_plugin_social_bar.bar.style.top||""===melibu_plugin_social_bar.bar.style.top?(melibu_plugin_social_bar.bar.style.top="0",a.currentTarget.style.transform="rotate(180deg)"):(melibu_plugin_social_bar.bar.style.top="-77px",a.currentTarget.style.transform="rotate(-180deg)"):melibu_plugin_social_bar.bar.classList.contains("mb-sf-right")?"-50px"===melibu_plugin_social_bar.bar.style.right||""===melibu_plugin_social_bar.bar.style.right?(melibu_plugin_social_bar.bar.style.right="0",a.currentTarget.style.transform="rotate(180deg)"):(melibu_plugin_social_bar.bar.style.right="-50px",a.currentTarget.style.transform="rotate(0)"):melibu_plugin_social_bar.bar.classList.contains("mb-sf-bottom")&&("-80px"===melibu_plugin_social_bar.bar.style.bottom||""===melibu_plugin_social_bar.bar.style.bottom?(melibu_plugin_social_bar.bar.style.bottom="0",a.currentTarget.style.transform="rotate(-180deg)"):(melibu_plugin_social_bar.bar.style.bottom="-80px",a.currentTarget.style.transform="rotate(180deg)"))}};document.addEventListener("DOMContentLoaded",function(){melibu_plugin_social.init(),melibu_plugin_social_bar.init()});